<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<f:view transient="true">
    <f:metadata>
        <f:viewAction action="#{courriersRecus.recupererLalisteDesCourriersRecus}" onPostBack="true"/>
    </f:metadata>
    <h:head>
        <title>Courriers envoyés</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF8" />
        <h:outputScript name="bootstrap/js/bootstrap.js" />
        <h:outputStylesheet name="bootstrap/css/bootstrap.css" />
        <h:outputStylesheet name="css/courriersrecus.css" />
        <h:outputStylesheet name="/wickedpicker/css/wickedpicker.min.css"/>
        <h:outputStylesheet name="/wickedpicker/css/wickedpicker.css"/>
        <h:outputScript name="wickedpicker/js/wickedpicker.js"/>
    </h:head>
    <style>
        .courrierurgent{
            background-color: #fca752 !important;
            color: #fefefe;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
        }
        .receptionok{
            background-color: #209436 !important;
            color: #fefefe;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
        }
        .receptionpasok{
            background-color: #6a000c !important;
            color: #fefefe;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
        }
        .ui-datatable .ui-datatable-header {
            text-align: right !important;
        }
    </style>
    <h:body id="page">
        <div class="container-fluid" >
            <div class="row">
                <div id="header">
                    <ui:insert name="header" >
                        <ui:include src="header.xhtml" />
                    </ui:insert>
                 </div>
                <div id="footer">
                    <ui:insert name="footer" >
                        <ui:include src="footer.xhtml" />
                    </ui:insert>
                </div>
                <div class="main-overview" style="margin-bottom: 90px; margin-top: 10px; overflow-y: auto">
                    <div class="col-sm-9 col-sm-offset-3 col-md-9 col-md-offset-2 main">
                        <ul class="breadcrumb" style="width:100%;">
                            <li><h:outputLink value="tableaudebord.xhtml" title="Accueil">Accueil</h:outputLink></li>
                            <li>Courriers reçus</li>
                        </ul>
                        <h3 class="page-header"><h:graphicImage value="./resources/images/courrierrecu.png" style="margin-right :10px"/>Courriers reçus</h3>

                        <h:form id="toolbar">
                            <p:toolbar style="margin-bottom: 15px; margin-top: 15px">
                                <f:facet name="left">
                                    <div id="buttonform" style="float: left">
                                        <p:commandButton type="button" style="background: dodgerblue; border-color:dodgerblue; color: white; font-weight: bold; padding: 2px 3px"
                                                         onclick="afficherFormulaireCourrierRecu()" iconPos="right"
                                                         value="Ajouter un courrier reçu" icon="fa fa-plus-square" />
                                    </div>
                                    <div id="buttonlist" style="float: left; display: none">
                                        <p:commandButton type="button" style="background: #209436; border-color:#209436; color: white; font-weight: bold; padding: 2px 3px"
                                                         onclick="afficherListeDesCourriersRecus()" iconPos="right"
                                                         value="Retour à la liste des courriers reçus" icon="fa fa-list-ul" />
                                    </div>
                                </f:facet>
                            </p:toolbar>
                        </h:form>

                        <h:form id="formListeDesCourriersRecus">
                            <p:dataTable tableStyle="table-layout: auto"
                                         widgetVar="tableauCourrierRecus"
                                         paginatorPosition="top"
                                         var="courriers" paginator="true"
                                         paginatorAlwaysVisible="false"
                                         rows="#{courriersRecus.rowsPerPage}"
                                         first="#{courriersRecus.first}"
                                         rowsPerPageTemplate="15,25,35"
                                         value="#{courriersRecus.courrier.listeDesCouriersRecus}"
                                         scrollable="false"
                                         emptyMessage="Aucun courrier reçu"
                                         rowIndexVar="index" border="2">

                                <f:facet name="header">
                                    <p:outputPanel  >
                                        <h:outputText  value="Recherche globale : " />
                                        <p:inputText id="globalFilter" onkeyup="PF('tableauCourrierRecus').filter()" placeholder="Recherche ..."
                                                     style="width:300px; background-color: #fff; border-radius: 5px; border: 1px #d3d6d6 solid;" />
                                    </p:outputPanel>
                                </f:facet>

                                <p:column>
                                    <f:facet name="header">N°</f:facet>
                                    <h:outputText value="#{index + 1}" />
                                </p:column>
                                <p:column style="width: 140px; text-align: center"
                                        filterStyle="background-color: white; width: 100px;
                                        border-radius: 5px;
                                        border: 1px #d3d6d6 solid"
                                          filterBy="#{courriers.dateDEnregistrement}">
                                    <f:facet name="header" >Date de réception </f:facet>
                                    <h:outputText style="font-size: 13px; alignment: center; " value="#{courriers.dateDEnregistrement}"/>
                                </p:column>
                                <p:column style="text-align: center"
                                        filterStyle="background-color: white; width: 100px;
                                        border-radius: 5px;
                                        border: 1px #d3d6d6 solid"
                                          filterBy="#{courriers.referenceCourrier}">
                                    <f:facet name="header">Référence</f:facet>
                                    <h:outputText style="font-size: 13px; alignment: center;" value="#{courriers.referenceCourrier}"/>
                                </p:column>
                                <p:column style="text-align: center"
                                        filterStyle="background-color: white; width: 150px;
                                        border-radius: 5px;
                                        border: 1px #d3d6d6 solid"
                                          filterBy="#{courriers.objetCourrier}">
                                    <f:facet name="header">Objet</f:facet>
                                    <h:outputText style="font-size: 13px; alignment: center;" value="#{courriers.objetCourrier}"/>
                                </p:column>
                                <p:column
                                        styleClass="#{courriers.prioriteCourrier eq 'Urgent' ? 'courrierurgent' : null}"
                                        style="width: 100px; text-align: center"
                                        filterStyle="background-color: white; width: 100px;
                                        border-radius: 5px;
                                        border: 1px #d3d6d6 solid" filterBy="#{courriers.prioriteCourrier}}">
                                    <f:facet name="header">Priorité</f:facet>
                                    <h:outputText style="font-size: 13px; alignment: center;" value="#{courriers.prioriteCourrier}"/>
                                </p:column>
                                <p:column
                                        styleClass="#{(courriers.accuseDeReception eq 'oui') ? 'receptionok' : (courriers.accuseDeReception eq 'non') ? 'receptionpasok' : null}"
                                        style="width: 100px; text-align: center"
                                        filterStyle="background-color: white; width: 130px;
                                        border-radius: 5px;
                                        border: 1px #d3d6d6 solid" filterBy="#{courriers.accuseDeReception}}">
                                    <f:facet name="header">Accusé de reception</f:facet>
                                    <h:outputText style="font-size: 13px; alignment: center;" value="#{courriers.accuseDeReception}"/>
                                </p:column>

                                <p:column style="width:32px">
                                    <p:commandButton  icon="fa fa-eye"
                                                      ajax="false"
                                                      action="#{courriersRecus.voirLesDetailsDuCourrier}"
                                                      style="background: #496ea1; border: 1px #496ea1 solid"
                                                      title="Voir plus">
                                        <f:setPropertyActionListener value="#{courriers}" target="#{courriersRecus.courrier}"/>
                                        
                                        
                                        <f:param name="courrierId" value="#{courriers.idCourrier}" />
                                        <f:param name="alfrescoId" value="#{courriers.idAlfresco}" />
                                        <f:param name="dossierId" value="#{courriers.idDossier}" />
                                        <f:param name="etatTransfer" value="#{courriers.transferer}" />
                                    </p:commandButton>
                                </p:column>
                                <f:facet name="footer">
                                    Nombre total de courriers :  #{fn:length(courriersRecus.courrier.listeDesCouriersRecus)}
                                </f:facet>
                            </p:dataTable>
                        </h:form >

                        <h:form id="formAjouterUnCourrierRecu" style="display: none;" cellspacing="30" cellpadding="30" enctype="multipart/form-data" onkeypress="if (event.keyCode == 13) { return false; }">
                            <p:messages id="messagevalidation" for="messagevalidation" showDetail="true" closable="true"/>
                            <div class="line" style=" margin-top: 20px">
                                <div class="colonneDouble">
                                    <div class="colonnecontent">
                                        <p:growl id="messageconfidentiel" for="messageconfidentiel" showDetail="true" life="4000"/>
                                        <h4 style="font-weight:bold; font-size: 17px; float: left; margin-right: 10px" >Confidentiel ? *</h4>
                                        <p:selectOneMenu widgetVar="selectOneMenuConfidentiel"
                                                         autoWidth="true" effect="slide" onchange="checkIfCourrierIsConfidentiel()"
                                                         value="#{nouveauCourrier.courrier.confidentiel}"
                                                         style="margin-left:10px; width: 40%; margin-top: 3px">
                                            <f:selectItem itemLabel="Choisissez une valeur" itemValue=""/>
                                            <f:selectItem itemLabel="Oui" itemValue="Oui"/>
                                            <f:selectItem itemLabel="Non" itemValue="Non"/>
                                            <p:ajax update="messageconfidentiel" listener="#{nouveauCourrier.voirSiLeCourrierEstConfidentiel}"/>
                                        </p:selectOneMenu>
                                    </div>
                                </div>
                            </div>

                            <div class="line" style=" margin-top: 20px">
                                <div class="colonneDouble">
                                    <div class="colonnecontent">
                                        <h:panelGrid columns="2"  styleClass="panelLogin" cellspacing="30" cellpadding="30">

                                            <h4 style="font-weight:bold; margin-right:5px; font-size: 14px" >Date de réception*</h4>
                                            <p:calendar styleClass="inputtextstyle" value="#{nouveauCourrier.dateTemp}"
                                                        showOn="focus" pages="1" effect="slide" locale="fr" widgetVar="calendarCourrier" id="dateAjout"/>
                                            <h4 style="font-weight:bold;  margin-right:8px; font-size: 14px">Heure de réception*</h4>
                                            <p:inputText styleClass="timepicker" value="#{nouveauCourrier.courrier.heureDeReception}" id="timepicker"/>
                                        </h:panelGrid>

                                    </div>
                                </div>
                            </div>

                            <p class="titresection"><h:graphicImage value="./resources/images/interview.png" style="margin-left:10px"/> Emetteur du courrier</p>
                            <div class="line" style=" margin-top: 20px">
                                <div class="colonnefullpage">
                                    <div class="colonnecontent">
                                        <h:panelGrid columns="3"  styleClass="panelLogin">
                                            <h4  style="font-weight:bold; font-size: 16px">Emetteur *</h4>
                                            <p:selectOneRadio widgetVar="selectOneRadioEmetteur" onchange="clicSurSelectOneRadioEmmetteur()" style="margin-left:80px"
                                                              id="choixEmetteurSelectOneRadio" unselectable="true" value="#{nouveauCourrier.emetteur.typeDEmetteur}">
                                                <f:selectItem id="agentAutreMinistereEmetteur" itemLabel="Agent d'un autre Ministère" itemValue="Agent Autre Ministere" />
                                                <f:selectItem id="entrepriseEmetteur" itemLabel="Entreprise" itemValue="Entreprise" />
                                                <f:selectItem id="associationEmetteur" itemLabel="Association" itemValue="Association" />
                                                <f:selectItem id="particulierEmetteur" itemLabel="Particulier" itemValue="Particulier" />
                                            </p:selectOneRadio>
                                        </h:panelGrid>
                                    </div>
                                </div>
                            </div>

                            <div class="line" style=" margin-top: 20px; display: none" id="divEmetteurAgentAutreMinistere">
                                <div class="colonnefullpage">
                                    <div class="colonnecontent">
                                        <h:panelGrid columns="2"  styleClass="panelLogin">
                                            <h4 style="font-weight:bold; font-size: 16px;" >Nom du Ministère *</h4>
                                            <p:selectOneMenu widgetVar="selectOneMenuAutreMinistereEmetteur" effect="slide" autoWidth="true" style="margin-left:60px;
                                                 width: 50%;"  id="selectOneMenuMinistereEmetteur" value="#{nouveauCourrier.emetteur.ministereAutreMinistere}">
                                                <f:selectItem itemLabel="Choisissez un Ministère" itemValue="rien" />
                                                <f:selectItems value="#{nouveauCourrier.etablissement.listeEtablissement}"/>
                                            </p:selectOneMenu>
                                            <h4 style="font-weight:bold; font-size: 16px">Direction *</h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle"
                                                          id="directionAutreMinistereEmetteur" value="#{nouveauCourrier.emetteur.directionAutreMinistere}"/>
                                            <h4 style="font-weight:bold;  font-size: 16px">Fonction *</h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle"
                                                          id="fonctionAutreMinistereEmetteur" value = "#{nouveauCourrier.emetteur.fonctionAutreMinistere}"/>
                                        </h:panelGrid>
                                    </div>
                                </div>
                            </div>

                            <div class="line" style=" margin-top: 20px; display: none" id="divEmetteurParticulier">
                                <div class="colonnefullpage">
                                    <div class="colonnecontent">
                                        <h:panelGrid columns="2" styleClass="panelLogin" cellspacing="30" cellpadding="30">
                                            <h4 style="font-weight:bold; font-size: 16px" >Nom *</h4>
                                            <h:inputText size="55" style="margin-left:60px" styleClass="inputtextstyle" id="nomEmetteur"
                                                         value="#{nouveauCourrier.emetteur.nomParticulier}"/>
                                            <h4 style="font-weight:bold; font-size: 16px">Prénom *</h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle" id="prenomEmetteur"
                                                          value="#{nouveauCourrier.emetteur.prenomParticulier}"/>
                                            <h4 style="font-weight:bold; font-size: 16px">Téléphone *</h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle" id="telephoneParticulierEmetteur"
                                                          value="#{nouveauCourrier.emetteur.telephoneParticulier}"/>
                                            <h4 style="font-weight:bold; font-size: 16px">Email </h4>
                                            <h:inputText size="55" style="margin-left:60px"  styleClass="inputtextstyle" id="emailParticulierEmetteur"
                                                         value="#{nouveauCourrier.emetteur.emailParticulier}"/>
                                        </h:panelGrid>
                                    </div>
                                </div>
                            </div>

                            <div class="line" style=" margin-top: 20px; display: none" id="divEmetteurEntrepriseOuAssociation">
                                <div class="colonnefullpage">
                                    <div class="colonnecontent">
                                        <h:panelGrid columns="2" styleClass="panelLogin" cellspacing="30" cellpadding="30">
                                            <h4 style="font-weight:bold; font-size: 16px">Raison sociale *</h4>
                                            <h:inputText size="55" style="margin-left:60px" styleClass="inputtextstyle"
                                                         id="nomRaisonSocialEmetteur" value="#{nouveauCourrier.emetteur.raisonSocial}"/>
                                            <h4 style="font-weight:bold; font-size: 16px">Direction *</h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle"
                                                          id="directionEntrepriseEmetteur" value="#{nouveauCourrier.emetteur.directionEntreprise}"/>
                                            <h4 style="font-weight:bold;  font-size: 16px">Fonction *</h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle"
                                                          id="fonctionEntrepriseEmetteur" value="#{nouveauCourrier.emetteur.fonctionEntreprise}"/>
                                            <h4 style="font-weight:bold;  font-size: 16px">Téléphone *</h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle"
                                                          id="telephoneEntrepriseEmetteur" value="#{nouveauCourrier.emetteur.fonctionEntreprise}"/>
                                            <h4 style="font-weight:bold;  font-size: 16px">Email </h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle"
                                                          id="emailEntrepriseEmetteur" value="#{nouveauCourrier.emetteur.emailEntreprise}"/>
                                            <h4 style="font-weight:bold;  font-size: 16px">Adresse </h4>
                                            <h:inputText  size="55" style="margin-left:60px" styleClass="inputtextstyle"  value="#{nouveauCourrier.emetteur.adresseEntreprise}"/>
                                        </h:panelGrid>
                                    </div>
                                </div>
                            </div>

                            <p class="titresection" ><h:graphicImage value="./resources/images/mail.png" style="margin-left:20px"/> Eléménts du courrier</p>
                            <div class="line" style=" margin-top: 20px;">
                                <div class="colonnefullpage">
                                    <div class="colonnecontent">
                                        <h:panelGrid columns="2" styleClass="panelLogin" cellspacing="30" cellpadding="30">
                                            <h4  style="font-weight:bold; font-size: 16px">Type de courrier *</h4>
                                            <p:selectOneMenu widgetVar="selectOneMenuTypeDeCourrier"
                                                             autoWidth="true" effect="slide"
                                                             style="margin-left:35px; width: 50%;"
                                                             value="#{nouveauCourrier.courrier.typeCourrier}">
                                                <f:selectItem itemLabel="Choisissez un type de courrier" itemValue="rien"/>
                                                <f:selectItems value="#{nouveauCourrier.courrier.listeTypeDeCourier}"/>
                                            </p:selectOneMenu>
                                            <h4  style="font-weight:bold; font-size: 16px">Référence *</h4>
                                            <h:inputText  size="50"  style="margin-left:35px" styleClass="inputtextstyle" id="referenceCourrier" value="#{nouveauCourrier.courrier.referenceCourrier}"/>
                                            <h4  style="font-weight:bold; font-size: 16px">Mots clés </h4>
                                            <h:panelGrid columns="3">
                                                <h:inputText  pt:placeholder=""  size="50" id="motsCles"
                                                              style="margin-left:35px" styleClass="inputtextstyle" value="#{nouveauCourrier.courrier.motsclesCourrier}"/>
                                                <h:outputLabel styleClass="indicationsaisie" value="*Séparé les mots clés par une virgule"/>
                                                <p:tooltip id="tooltipMotsCles" for="motsCles" value="Séparé les mots clés par une virgule"
                                                           showEvent="focus" position="right" hideEffect="slide"  styleClass="qtip-default"/>
                                            </h:panelGrid>
                                            <h4  style="font-weight:bold; font-size: 16px">Objet du courrier *</h4>
                                            <h:inputText size="50" styleClass="inputtextstyle" style="margin-left:35px" id="objetCourrier" value="#{nouveauCourrier.courrier.objetCourrier}"/>
                                            <h4  style="font-weight:bold; font-size: 16px">Commentaires</h4>
                                            <h:inputText size="50" style="margin-left:35px" styleClass="inputtextstyle"  id="commentaires" value="#{nouveauCourrier.courrier.commentairesCourrier}"/>
                                            <h4  style="font-weight:bold; font-size: 16px">Priorité *</h4>
                                            <h:panelGrid columns="2" style="margin-left:35px" cellpadding="5">
                                                <p:selectOneRadio id="choixPrioriteSelectOneRadio" onchange="clicSelectOneRadioPrioriteCourrier()"  unselectable="true"
                                                                  value="#{nouveauCourrier.courrier.prioriteCourrier}">
                                                    <f:selectItem itemLabel="Normal" itemValue="Normal" />
                                                    <f:selectItem itemLabel="Urgent" itemValue="Urgent" />
                                                </p:selectOneRadio>
                                            </h:panelGrid>
                                        </h:panelGrid>
                                    </div>
                                </div>
                            </div>

                            <p class="titresection" id="titreSectionFichier"><h:graphicImage value="./resources/images/folder.png" style="margin-left:20px"/> Fichier(s)</p>

                            <div class="line" id="divFichierEtAnnnexe" style=" margin-top: 20px;">
                                <div class="colonnefullpage">
                                    <div class="colonnecontent">
                                        <h:panelGrid columns="3" styleClass="panelLogin" >
                                            <h4  style="font-weight:bold; font-size: 16px">Fichier du courrier *</h4>
                                            <p:fileUpload mode="advanced" id="fichierDuCourrier"
                                                          listener="#{nouveauCourrier.ajoutDuFichierDuCourrier}"
                                                          accept=".doc,.docx,.pdf,.PDF,.xls,.xlsx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,
                                                                                        application/pdf,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                                                          invalidSizeMessage="Erreur, le fichier est trop lourd!! 10 MB au plus"
                                                          invalidFileMessage="Erreur, ce type de fichier n'est pas autorisé. Retirer le fichier : "
                                                          skinSimple="true"
                                                          uploadLabel="Valider"
                                                          cancelLabel="Annuler"
                                                          fileLimit="1"
                                                          fileLimitMessage="Erreur, vous avez dépassé le nombre de fichier annexe autorisé (1 fichier au plus)"
                                                          allowTypes="/(\.|\/)(pdf|PDF|doc|docx|xls|xlsx)$/"
                                                          style="margin-bottom:5px; margin-left:25px" label="Ajouter"/>

                                            <h:outputLabel styleClass="indicationsaisie" value="*fichiers autorisés : word, excel et pdf"/>

                                            <h4  style="font-weight:bold; font-size: 16px">Fichier annexe(s) </h4>
                                            <p:fileUpload style="margin-left:25px" label="Ajouter"
                                                          listener="#{nouveauCourrier.ajoutDesFichierAnnexes}"
                                                          invalidSizeMessage="Erreur, le fichier est trop lourd!! 10 MB au plus"
                                                          invalidFileMessage="Erreur, ce type de fichier n'est pas autorisé. Retirer le fichier : "
                                                          uploadLabel="Valider" cancelLabel="Annuler"
                                                          mode="advanced" dragDropSupport="false"
                                                          update="messagesAnnexes"
                                                          fileLimitMessage="Erreur, vous avez dépassé le nombre de fichier annexe autorisé (4 fichiers au plus)"
                                                          multiple="true" sizeLimit="10240000" fileLimit="4"
                                                          skinSimple="true" effect="slide" previewWidth="50"
                                                          allowTypes="/(\.|\/)(pdf|PDF|doc|docx|xls|xlsx|ppt|pptx|jpg|jpeg|png)$/" />

                                            <h:outputLabel styleClass="indicationsaisie" value="*fichiers annexes autorisés : word, excel, pdf, ppt et image (png et jpeg)"/>

                                        </h:panelGrid>
                                        <p:messages id="messagesAnnexes" for="messagesAnnexes" showDetail="true" closable="true"/>
                                    </div>
                                </div>
                            </div>

                            <p:spacer height="15px"/>
                            <p:separator/>

                            <div class="line" style=" margin-top: 20px; margin-bottom: 100px">
                                <div class="colonnefullpage">
                                    <div class="colonnecontent">
                                        <p:messages id="messagesErreur" for="messagesErreur" showDetail="true" closable="true"/>
                                        <p:commandButton value="Enregistrer"
                                                         style="float: right"
                                                         icon="fa fa-check-circle"
                                                         onclick="verifierLeFormulaireAvantValidation()"
                                                         styleClass="boutonValiderInscription"/>
                                    </div>
                                </div>
                            </div>

                            <p:dialog resizable="false"
                                      header="Valider votre saisie ? "
                                      widgetVar="alerteBoxValiderFormulaire" width="350"
                                      modal="true" hideEffect="clip"
                                      showEffect="clip"  dynamic="true" closable="true">
                                <h:panelGrid columns="2">

                                    <p:commandButton value="Valider"
                                                     style="margin-top: 14px; margin-right: 10px"
                                                     icon="fa fa-check"
                                                     id="boutonEnregistrer"
                                                     update="@form"
                                                     onclick="PF('alerteBoxValiderFormulaire').hide()"
                                                     action="#{nouveauCourrier.validerLeFormulaire}"/>

                                    <p:commandButton  value="Annuler"
                                                      icon="fa fa-close"
                                                      type="button"
                                                      onclick="PF('alerteBoxValiderFormulaire').hide()"
                                                      style="margin-top: 14px; margin-right: 10px"/>

                                </h:panelGrid>
                            </p:dialog>

                            <p:blockUI block="page" trigger="boutonEnregistrer" >
                                <h:graphicImage value="./resources/images/loading.gif" id="loadingcourrier"/>
                                <h4  style="font-weight:bold; font-size: 16px">Veuillez patienter... </h4>
                            </p:blockUI>

                            <p:dialog id="courrierBienEnvoyer"
                                      header="Courrier envoyé"
                                      widgetVar="dialogueCourrierBienEnvoyer"
                                      modal="true" hideEffect="clip"
                                      showEffect="clip"
                                      resizable="false">
                                <h:outputText value="Le courrier à bien été enregistré" />
                                <p:separator/>

                                <p:commandButton value="Ok"
                                                 update="courrierForm"
                                                 style="margin-top: 14px; margin-right: 10px"
                                                 icon="fa fa-check-circle"
                                                 type="button"
                                                 onclick="rechargerLaPageDuFormulaire()"/>

                            </p:dialog>

                            <p:dialog id="rechargerLaPage"
                                      header="Attention"
                                      widgetVar="dialogueAttentionRechargerLaPage"
                                      modal="true"
                                      hideEffect="clip"
                                      showEffect="clip"
                                      resizable="false">
                                <h:outputText value="Si vous recharger la page vous allez perdre toutes les informations que vous déja renseignées dans le formulaire !!! " />
                                <p:separator/>
                                <h:form>
                                    <p:commandButton value="Continuer"
                                                     style="margin-top: 14px; margin-right: 10px; background-color: #feda5a; border: 1px #feda5a solid"
                                                     icon="fa fa-check-circle"
                                                     type="button"
                                                     update="@form"
                                                     actionListener="#{nouveauCourrier.rechargerLaPage}"/>
                                </h:form>
                            </p:dialog>

                        </h:form>

                    </div>
                </div>
            </div>
        </div>
        <h:outputScript name="js/frenchcalendar.js"/>
        <h:outputScript name="js/courriersrecus.js"/>
    </h:body>
</f:view>
</html>
